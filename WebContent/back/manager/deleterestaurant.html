<table id="restaurant_data" data-options="fit:true"></table>

<script type="text/javascript">
var restaurant_editRow = undefined; // 正在被编辑的行
var restaurant_op; // 用来记录用的操作
var restaurant_flag; // 用来记录操作的名称
var rstate = "0/1"; // 0.营业 1.休息 

var restaurant_datagridObj = $('#restaurant_data').datagrid({
	url : '../../resturant',
	queryParams: {op:"findByPage", rstate:rstate},
	fitColumns: true,
	loadMsg: "数据加载中...",
	striped: true,
	pagination: true,
	pageSize: 5,
	pageList: [5, 10, 20, 30, 40, 50, 100],
	sortName: "rid",
	remoteSort: false,
	sortOrder: "desc",
	singleSelect: true,
	columns : [ [ 
		{field : 'rid', title : '店铺编号', width : 100, align : 'center', sortable: true},
		{field : 'rpic', title : '店铺图片', width : 100, align : 'center', sortable: true},
		{field : 'rname', title : '店铺名称', width : 100, align : 'center', sortable: true},
		{field : 'radd', title : '店铺地址', width : 100, align : 'center', sortable: true},
		{field : '_operate', title : '操作', width : 50, align : 'center', formatter: function(val, row, index) {
			return "<a href='javascript:restaurant_delete(" + row.rid +")'>[删除]</a>";
		}}
	] ]
});

function restaurant_delete(rid){
	$.post("../../resturant",{op:"delete", rid:rid}, function(data){
		data = parseInt($.trim(data));
		if (data > 0) {
			$.messager.show({title:'成功提示', msg:'店铺删除成功...', timeout:2000, showType:'slide'});
			restaurant_datagridObj.datagrid("reload"); // 重新加载表格中的数据
		} else {
			$.messager.alert('错误提示','店铺删除失败...','error');
		}
	}, "text");
}
</script>