<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>丑团外卖系统-后台注册</title>
<link rel="shortcut icon" href="../images/logo2.png" type="image/x-icon" />
<link rel="stylesheet" href="../css/register.css">
<link rel="stylesheet" href="../css/button.css">
<script type="text/javascript" src="../js/jquery-1.12.2.min.js"></script>
<script type="text/javascript">
function checkTel() {
	var utel = $.trim($("#register_tel").val());
	var reg = /^[0-9]{11}$/;
	if (!reg.test(utel)) {
		alert("您输入的手机号不正确...");
	} else {
		// 发送Ajax请求
		$.post("../admin", {op:"utel", utel:utel}, function(data){
			// 请求处理后，拿到服务器响应怎么处理
			if (data == "null") {
				alert("验证码发送失败...");
			} else {
				alert("验证码发送成功...");
			}
		}, "text");
	}
}
function checkRegister() {
	var uname = $.trim($("#register_name").val()); // 用户名
	var upwd = $.trim($("#register_pwd").val()); // 密码
	var upwd2 = $.trim($("#register_rpwd").val()); // 确认密码
	var utel = $.trim($("#register_tel").val()); // 手机号
	var code = $.trim($("#code").val()); // 验证码
	
	if (uname == "" || upwd == "" || upwd2 == "" || utel == "" || code == "") {
		alert("您输入的信息不完整...");
	} else if (upwd != upwd2) {
		alert("两次输入的密码不一致...");
	} else {
		// 发送Ajax请求
		$.post("../admin", {op:"register", uname:uname, upwd:upwd, utel:utel, code:code}, function(data){
			// 请求处理后，拿到服务器响应怎么处理
			data = parseInt($.trim(data));
			if (data == 1) { // 注册成功
				$("#register_form")[0].reset(); // 注意：reset()不是jquery的方法，而是js的方法，所以需要将Jquery对象变成js对象
				location.href="manager/menu.html";
			} else {
				alert("注册失败...");
			}
		}, "text");
	}
}
</script>
</head>
<body>
    <div id="register_center">
    	<div id="register_area">
    		<div id="register_info">
    			<a href="login.html" id="register_info_a" class="button button-glow button-rounded button-highlight">返回登录界面</a>
    			<form action="register.html" method="post" id="register_form">
    				<table>
    					<tr>
    						<td align="right">用户名:</td>
    						<td><input id="register_name" type="text" placeholder="请输入您的用户名..." /></td>
    					</tr>
    					<tr>
    						<td align="right">密码:</td>
    						<td><input id="register_pwd" type="password" placeholder="请输入您的密码..." /></td>
    					</tr>
    					<tr>
    						<td align="right">确认密码:</td>
    						<td><input id="register_rpwd" type="password" placeholder="请确认您的密码..." /></td>
    					</tr>
    					<tr>
    						<td align="right">手机号码:</td>
    						<td><input id="register_tel" type="tel" placeholder="请输入您的手机号..." /></td>
    					</tr>
    					<tr>
    						<td align="right">验证码:</td>
    						<td><input id="code" type="text" style="width: 180px;" placeholder="请输入验证码..." />
    						<input class="button button-glow button-rounded button-highlight" type="button"  onclick="checkTel()" id="sub_btn"  value="发&nbsp;送" /></td>
    					</tr>
    					<tr>
    						<td align="center" colspan="3">
    							<input class="button button-glow button-rounded button-highlight" type="button"  onclick="checkRegister()" id="sub_btn2" value="注&nbsp;&nbsp;册" />
    						</td>
    					</tr>
    				</table>
    			</form>
    		</div>
    	</div>
    </div>
</body>
</html> 